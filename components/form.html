<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="../css/onHonestUI.css">
  <script src="../vendor/jquery-1.8.3.min.js"></script>
  <script src="../js/ohui-all.min.js"></script>
  <!--fontawesome-->
  <link rel="stylesheet" href="../vendor/fontAwesome/css/font-awesome.css">
  <!--iconfonts-ali-->
  <link rel="stylesheet" href="../css/ali-iconfonts/iconfont.css">
  <!-- laydate 日期选择器 -->
  <link rel="stylesheet" href="../vendor/laydate/theme/default/laydate.css">
  <script src="../vendor/laydate/laydate.js"></script>
  <link rel="stylesheet" href="../vendor/fontAwesome/css/font-awesome.min.css">

</head>
<body>
  <main>
    <fieldset>
      <legend>单选框</legend>
      <label class="ohui-radio">
        <input type="radio" name="sex" value="male">
        <span>男</span>
      </label>
      <label class="ohui-radio">
        <input type="radio" name="sex" value="female">
        <span>女</span>
      </label>
<!--      <span class="iconfont icon-radio-unchecked"></span>-->
    </fieldset>
    <fieldset>
      <legend>开关</legend>
      <label class="ohui-switch">
        <input type="checkbox" name="check">
        <span></span>
      </label>
    </fieldset>
    <fieldset>
      <legend>复选框</legend>
      <h3>你喜爱的语言：</h3>
      <label class="ohui-checkbox">
        <input type="checkbox" disabled name="language" value="javascript">
        <span>javaScript</span>
      </label>
      <label class="ohui-checkbox">
        <input type="checkbox" name="language" value="python">
        <span>python</span>
      </label>
      <label class="ohui-checkbox">
        <input type="checkbox" name="language" value="checkbox">
        <span>ruby</span>
      </label>
      <label class="ohui-checkbox">
        <input type="checkbox" name="language" value="java">
        <span>java</span>
      </label>
    </fieldset>
    <fieldset>
      <legend>input输入框</legend>
      <div class="ohui-input-box">
        <span class="ohui-icon ohui-icon-search" title="搜索"></span>
        <input type="text" class="ohui-input">
      </div>
      <div class="ohui-input-box">
        <span class="ohui-icon ohui-icon-search front" title="搜索"></span>
        <input type="text" class="ohui-input">
      </div>
      <div class="ohui-input-box">
        <input type="text" class="ohui-input" disabled>
      </div>
    </fieldset>
    <fieldset>
      <legend>输入框组</legend>
      <div class="ohui-form-group">
        <span class="ohui-input-name">用户名</span>
        <div class="ohui-input-box">
          <input type="text" class="ohui-input">
        </div>
      </div>
    </fieldset>
    <fieldset>
      <legend>文本域</legend>
      <div class="ohui-form-group">
        <span class="ohui-input-name">用户名</span>
        <label class="ohui-input-box">
          <textarea class="ohui-textarea"></textarea>
        </label>
      </div>
    </fieldset>
    <fieldset>
      <legend>选择框</legend>
      <div class="ohui-form-group">
        <span class="ohui-input-name">行政机关</span>
        <label class="ohui-input-box" id="select_input">
          <span class="ohui-icon ohui-icon-arrow-down" title="展开"></span>
          <input type="text" class="ohui-input" readonly>
        </label>
      </div>
    </fieldset>
    <fieldset>
      <legend>日期选择 laydate</legend>
      <div class="ohui-form-group">
        <span class="ohui-input-name">选择日期</span>
        <label class="ohui-input-box">
          <span class="ohui-icon ohui-icon-calendar" title="日历"></span>
          <input type="text" class="ohui-input" id="datePrick" >
        </label>
      </div>
    </fieldset>
    <fieldset>
      <legend>地区选择 districtPick</legend>
      <div class="ohui-form-group" id="districtPick">
        <span class="ohui-input-name">行政机关</span>
        <label class="ohui-input-box">
          <span class="ohui-icon ohui-icon-arrow-down" title="展开"></span>
          <input type="text" class="ohui-input" readonly>
        </label>
        <label class="ohui-input-box">
          <span class="ohui-icon ohui-icon-arrow-down" title="展开"></span>
          <input type="text" class="ohui-input" readonly>
        </label>
        <label class="ohui-input-box">
          <span class="ohui-icon ohui-icon-arrow-down" title="展开"></span>
          <input type="text" class="ohui-input" readonly>
        </label>
      </div>
    </fieldset>
    <fieldset>
      <legend>多级展开</legend>
      <div class="ohui-form-group">
        <span class="ohui-input-name">地区选择</span>
        <div class="ohui-input-box lg-width" id="ohuiMultiSelect">
          <input type="text" class="ohui-input" readonly>
          <ul class="ohui-select-ul">
            <li>
              <span class="text">cs-1</span>
              <ul class="ohui-select-ul">
                <li>
                  <span class="text">cs-1-1</span>
                  <ul class="ohui-select-ul">
                    <li>
                      <span class="text">cs-1-1-1</span>
                      <ul class="ohui-select-ul">
                        <li><span class="text">cs-1-1-1-1</span></li>
                        <li><span class="text">cs-1-1-1-2</span></li>
                        <li><span class="text">cs-1-1-1-3</span></li>
                      </ul>
                    </li>
                    <li><span class="text">cs-1-1-2</span></li>
                    <li><span class="text">cs-1-1-3</span></li>
                  </ul>
                </li>
                <li>
                  <span class="text">cs-1-2</span>
                </li>
                <li>
                  <span class="text">cs-1-3</span>
                </li>
              </ul>
            </li>
            <li>
              <span class="text">cs-2</span>
              <ul class="ohui-select-ul">
                <li><span class="text">cs-2-1</span></li>
                <li>
                  <span class="text">cs-2-2</span>
                  <ul class="ohui-select-ul">
                    <li><span class="text">cs-2-2-1</span></li>
                    <li><span class="text">cs-2-2-2</span></li>
                    <li><span class="text">cs-2-2-3</span></li>
                  </ul>
                </li>
                <li><span class="text">cs-2-3</span></li>
              </ul>
            </li>
            <li><span class="text">cs-3</span></li>
          </ul>
        </div>
      </div>
    </fieldset>
  </main>

  <script>
    $(function () {
      // 选择框
      $('#select_input').ohuiSelect({
        array: [{id:'n0',text:'t0'},{id:'n1',text:'t1'},{id:'n2',text:'t2'}],
        value: 't1',
        callback: function ($ele) {
          console.log($ele);
        }
      });
      // 日期选择
      laydate.render({
        elem: '#datePrick',
        range: '-'
      });
      //省市县
      $('#districtPick').ohuiDistrictPick({
        callback: function (province,city,area) {
          console.log(province,city,area);
          console.log(this);
        }
      });


      // multiSelect($('#ohuiSelectUlInput'));

      $('#ohuiMultiSelect').multiSelect();

    });

    // 多级展开
    function multiSelect($element) {

      var res = [];
      var conStr = ' > ';
      var $input = $element;
      var $selectUl = $element.next('.ohui-select-ul');

      // 增加图标
      $selectUl.find('li').each(function (index) {
        var $childUl = $(this).children('.ohui-select-ul');
        if($childUl.length){
          $(this).append('<i class="fa fa-angle-right pull-right"></i>');
        }
      });

      // 点击显示 select-ul
      // 阻止事件冒泡
      $input.on('click',function (e) {
        $selectUl.show();
        e.stopPropagation();
      });

      // 阻止事件冒泡
      $selectUl.on('click',function (e) {
        e.stopPropagation();
      });

      $selectUl.on('click','li',function (e) {
        var $childUl = $(this).children('.ohui-select-ul');


        $(this).parent().find('.active').removeClass('active');
        $(this).addClass('active');
        res.length = $(this).parents('.ohui-select-ul').length;
        res[res.length-1] = $(this).children('.text').text();

        if($childUl.length){
          $childUl.show();
        }else {
          $selectUl.hide();
          $input.val(res.join(conStr));
        }

        e.stopPropagation();
      });

      $(document).on('click',function (e) {

        $selectUl.hide();
      });

    }


    ;(function ($,window,document,undefined) {
      function MultiSelect(ele,opt) {
        this.element = ele;
        this.defaults = {
          res: [],
          conStr:  ' ',
        };
        this.options = $.extend({},this.defaults,opt)
      }

      MultiSelect.prototype = {
        constructor: MultiSelect,
        init: function () {
          var _this = this;
          _this.$input = _this.element.children('.ohui-input');
          _this.$selectUl = _this.element.children('.ohui-select-ul');
          _this.generateIcons();
          _this.bindEvents();

          return _this.element;
        },
        bindEvents: function () {
          var _this = this;

          // 点击显示 select-ul
          // 阻止事件冒泡
          _this.$input.on('click',function (e) {
            _this.$selectUl.show();
            e.stopPropagation();
          });

          // 阻止事件冒泡
          _this.$selectUl.on('click',function (e) {
            e.stopPropagation();
          });

          // 点击li，执行事件
          // 当前元素添加active,兄弟元素及其子元素移除active,把当前元素text加入res
          // 如果当前节点有子节点，展开子元素。否则隐藏selectUl,结果更新到input上。
          _this.$selectUl.on('click','li',function (e) {
            var $childUl = $(this).children('.ohui-select-ul');


            $(this).parent().find('.active').removeClass('active');
            $(this).addClass('active');
            _this.options.res.length = $(this).parents('.ohui-select-ul').length;
            _this.options.res[_this.options.res.length-1] = $(this).children('.text').text();

            if($childUl.length){
              $childUl.show();
            }else {
              _this.$selectUl.hide();
              _this.$input.val(_this.options.res.join(_this.options.conStr));
            }

            e.stopPropagation();
          });

          // 点击其他区域隐藏
          $(document).on('click',function (e) {
            _this.$selectUl.hide();
          });
        },
        generateIcons: function () {
          var _this = this;
          _this.$selectUl.find('li').each(function (index) {
            var $childUl = $(this).children('.ohui-select-ul');
            if($childUl.length){
              $(this).append('<i class="fa fa-angle-right pull-right"></i>');
            }
          });
        }
      }

      $.fn.multiSelect = function (options) {
        var multiSelect = new MultiSelect(this,options);
        return multiSelect.init();
      }

    })(jQuery,window,document)
  </script>

</body>
</html>